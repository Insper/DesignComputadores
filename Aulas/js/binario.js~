// Funcoes para trabalhar com binario.

// Javascritp: a maior representacao binaria possivel = 32 bits.
function converteSignedDecimal(binStr) {
  // Se o bit MSB, que quando se usa string é o bit na posição ZERO (binStr[0]), for 1: estende 1 caso contrario: estende 0.
  binStr = binStr[0]==="1"? binStr.padStart(32,"1"): binStr.padStart(32,"0");
  // O shift de ZERO posicoes força conversão para 32 bits:
  return parseInt(binStr,2) >> 0
}

function converteUnsignedDecimal(binStr) {
  // Unsigned: sempre faz a extensao de sinal com ZERO.
  binStr.padStart(32,"0");
  return parseInt(binStr,2) >> 0
}

// Verifica se a entrada esta em binario.
function validaBinario(nome) {
    var valor, tamanho, i;
    document.getElementById(nome).style.color = "black";
    valor = document.getElementById(nome).value;
    tamanho=valor.length;
    for (i=0;i<tamanho; i=i+1){
        if ( valor[i] != 1 && valor[i] != 0 ){
            document.getElementById(nome).style.color = "red";
            alert("O valor deve ser 0 ou 1");
        }
    }
}


// APAGAR ESTA FUNCAO:
function HexBin(number){
  //alert (number);
  //alert (number.value);
  var fromBase = 16;
  var toBase = 2;
  var numberInDecimal = parseInt(number.value, fromBase);
  var saida = (parseInt(numberInDecimal)).toString(toBase);
  var organizado="";
  var total = (saida.length)%4 + 1;
  var resto = (saida.length)%4;
  if ((saida.length)%4 != 0){
//    alert("Comprimento: "+ saida.length + "\nnao eh multiplo de 4\nTotal= "+total);
    for (i=0; i < (4-resto); i++) {
      organizado += "0";
    }
  }
  for (i=0; i < saida.length; i++) {
//    alert("Posicao["+ i +"] = " + saida[i]);
    if ((saida.length-i)%4 == 0){
      organizado += " " + saida[i];
    } else {
      organizado +=  saida[i];
    }
  };
//  alert (organizado);
  document.getElementById("resulttxt").value = organizado;
  document.getElementById("baseresult").innerHTML = "(" + number.value + ")<sub>16</sub>  =  (" + organizado + ")<sub>2</sub>";
}

// ACERTAR ESTA:
function geraEquacao(number, base){  
//  var fromBase = 16;
  var fromBase = base;
  var toBase = 2;
  var numberInDecimal = parseInt(number.value, fromBase);
  var saida = (parseInt(numberInDecimal)).toString(toBase);
//  var organizado="";
  var equacao="";
  var posicao = 0;
  var equac=saida.replace(/\s/g,'');

//  alert ("Tamanho = "+equac.length);

  for (i=0; i < equac.length; i++) {
    posicao = equac.length - 1 - i;
    switch (equac[i]) {
      case "0":
        if (i==0){
          equacao += "(not A"+posicao+")";
        } else {
          equacao += " and (not A"+posicao+")";
      }
        break;
      case "1":
        if (i==0){
          equacao += "(A"+posicao+")";
        } else {
          equacao += " and (A"+posicao+")";
      }
        break;
      default:
    }
  }
  alert ("Equacao = "+equacao);
  // Fazer o retorno da Equacao:
  return equacao;
  //document.getElementById("Equation").innerHTML = equacao;
}
